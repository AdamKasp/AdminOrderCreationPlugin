{% extends '@SyliusAdmin/layout.html.twig' %}

{% form_theme form '@SyliusAdmin/Form/theme.html.twig' %}

{% block content %}
    {{ form_start(form, {'action': url('sylius_admin_order_creation_order_create', {'customerEmail': (form.customer.vars.choices|first).value})}) }}
        {{ form_row(form.customer) }}
        <button class="ui primary button" type="submit">Next</button>
    {{ form_end(form) }}
{% endblock %}

{% block javascripts %}
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script>
        $('select').on('change', function() {
            let form = $(this).parents('form');
            let action = form.attr('action');

            action = action.substr(0, action.lastIndexOf("/"));
            form.attr('action', action+"/"+$(this).val());
        });
    </script>
{% endblock %}
